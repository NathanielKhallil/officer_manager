<body >
    <header>
      <nav class="nav bg-dark navbar-expand-lg">
        <a class="navbar-brand text-light text-decoration-none pt-2 ps-4">
          Office Resources and Management Assistant
        </a>
        <ul
          class="navbar-nav text-light bg-dark ms-auto"
          style="flex-direction: row"
        >
        <li class="nav-item ps-0">
          <a class="nav-link active ps-3 pe-2" id="info" name="info"> General Info </a>
        </li>
        <li class="nav-item ps-0">
          <a class="nav-link active ps-3 pe-2" id="userPortal" name="userPortal" href="/userPortal"> Dashboard </a>
        </li>
        <li class="nav-item ps-0">
            <a class="nav-link active ps-3 pe-2" id="index" name="index" href="/"> Home </a>
          </li>
          <li class="nav-item ps-3 pe-2">
            <a class="nav-link active" id="logout" name="logout" href="/logout"> Logout </a>
          </li>
        </ul>
      </nav>
    </header>
        <section>
            <form
            class="form-outline rounded p-5"
            style="margin: 2rem auto 2rem auto;"
            action="/matters"
            method="POST"
            >
            <h1 style="font-size: 130%">Add a new matter</h1>
            <div class="form-floating">
              <input
                type="number"
                id="matterNum"
                class="form-control mb-4"
                placeholder="####"
                name="matterNum" 
                
              />
              <label for="matterNum"  class="text-left"> Matter No.:</label>
            </div>
            <div class="form-floating">
              <input
                type="text"
                class="form-control"
                placeholder="Add a memo (optional)"
                name="notes" 
                id="notes"
                rows="3"
              />
              <label class="form-label text-left" for="notes"
                >Notes:</label
              >
            </div>
        
        <button class="btn bg-info text-light justify-content-center" style="display: flex; margin: 1rem auto 0rem auto;" type="submit">
            Save Matter
        </button>  
        </form>     
    </section>
    <section style="margin: 0 auto;">
         <% for(var i=0; i<matters.length; i++) { %>
            <form method="POST"  class="d-flex justify-content-center" style="margin: 0 auto;">
                <table class="table table-dark mb-2 justify-content-center" style="width: 70%; font-family: Arial, Helvetica, sans-serif; font-size: 100%; box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;" >
                <thead>
                    <tr class="table-active">
                        <th scope="col" class="h6">Matter No.</th>
                        <th scope="col" class="h6"> CFA Signed: </th>
                        <th scope="col" class="h6"> S of C Filed: </th>
                        <th scope="col" class="h6"> S of C Served: </th>
                        <th scope="col" class="h6"> S of D Served: </th>
                        <th scope="col" class="h6" style="min-width: 6rem;"> Aff of Recs Served: </th>
                        <th scope="col" class="h6"> Producibles Sent:</th>
                        <th scope="col" class="h6"> Questioning Done: </th>
                        <th scope="col" class="h6"> Undertakings To Do:</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row"><%= matters[i].matter_number %> </th>
                        <td>
                            <select class="bg-dark text-light" id="cfa_signed" name="cfa_signed" onchange="getValue(this)">
                                <option value="<%= matters[i].cfa_signed %>"><%= matters[i].cfa_signed %></option>
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </td>
                        <td>
                            <select class="bg-dark text-light" id="statement_of_claim_filed" name="statement_of_claim_filed" onchange="getValue(this)">
                                <option value="<%= matters[i].statement_of_claim_filed %>"><%= matters[i].statement_of_claim_filed %></option>
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </td>
                        <td>
                            <select class="bg-dark text-light" id="s_of_c_served" name="s_of_c_served" onchange="getValue(this)">
                                <option value="<%= matters[i].s_of_c_served %>"><%= matters[i].s_of_c_served %></option>
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </td>
                        <td>
                            <select class="bg-dark text-light" id="s_of_d_served" name="s_of_d_served" onchange="getValue(this)">
                                <option value="<%= matters[i].s_of_d_served %>"><%= matters[i].s_of_d_served %></option>
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </td>
                        <td>
                            <select class="bg-dark text-light" id="aff_of_recs_served" name="aff_of_recs_served" onchange="getValue(this)">
                                <option value="<%= matters[i].aff_of_recs_served %>"><%= matters[i].aff_of_recs_served %></option>
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </td>
                        <td>
                            <select class="bg-dark text-light" id="producibles_sent" name="producibles_sent" onchange="getValue(this)">
                                <option value="<%= matters[i].producibles_sent %>"><%= matters[i].producibles_sent %></option>
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </td>
                        <td>
                            <select class="bg-dark text-light" id="questioning_done" name="questioning_done" onchange="getValue(this)">
                                <option value="<%= matters[i].questioning_done %>"><%= matters[i].questioning_done %></option>
                                <option value="true">true</option>
                                <option value="false">false</option>
                            </select>
                        </td>
             
                        <td> <input type="number" value="<%= matters[i].undertakings_remaining %>" placeholder="<%= matters[i].undertakings_remaining %>" id="undertakings_remaining" name="undertakings_remaining" style="
                            width: 3rem" /></td>
                    </tr>
                    
                    <tr>
                    <th scope="row"> Memo:  </th>
                        <td colspan="8"><textarea class="bg-dark text-light" id="matter_number" name="matter_number" style="width: 100%; font-family: Helvetica"> <%= matters[i].notes %> </textarea> </td>
                    </tr>
                    </tbody>
                </table>
                     <div class="d-flex flex-column mb-2" style="box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px, rgba(0, 0, 0, 0.3) 0px 7px 13px -3px, rgba(0, 0, 0, 0.2) 0px -3px 0px inset;"><input type="hidden" name="_method" value="PUT"/>
                     <button formaction="/matters/update/<%= matters[i].id %>" style="height:50%;"> Update </button>
                     <button formaction="/matters/delete/<%= matters[i].id %>" style="height:50%;"> Delete </button>
                    </div>
                </form>
                <% } %>
        </section>
    <div class="wrapper">

    </div>
     
    <footer class="footer">
      <div class="footer-header">
        Quicklinks for Filing Documents
      </div>
      <div class="push"></div>
      <div class="container">
        <div class="row">
          <div class="col">
            <a class="nav-link active" href="https://qb-filing.alberta.ca/">
              Alberta Court of Queen's Bench Digital Filing
            </a>
          </div>
          <div class="col">
            <a class="nav-link active" href="https://cams.albertacourts.ca/public-portal/?q=node/403">
            Alberta Court of Appeal Cams Digital Filing
          </a>
          </div>
          <div class="col">
            <a class="nav-link active" href="https://surrogate.alberta.ca/">
            Alberta Queen's Bench (Surrogate) Digital Filing 
          </a>
          </div>
        </div>
      </div>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>

  </body>

</html>